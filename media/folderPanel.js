"use strict";(()=>{var v=acquireVsCodeApi(),h=null,f=!1,y=!1,p=null;function a(e){return document.getElementById(e)}function c(e){if(!e)return"";let t=document.createElement("div");return t.textContent=e,t.innerHTML}function r(){y||(p&&clearTimeout(p),p=setTimeout(()=>{h&&b()},400))}function b(){let e=JSON.parse(JSON.stringify(h));e.info=e.info||{},e.info.type="folder",e.info.name=a("infoName").value||void 0;let t=a("infoDescription").value;t?e.info.description=t:delete e.info.description;let n=[];document.querySelectorAll("#defaultHeadersBody tr").forEach(s=>{let d=s.querySelectorAll('input[type="text"]'),i=s.querySelector('input[type="checkbox"]');if(d[0]?.value){let o={name:d[0].value,value:d[1]?.value||""};i&&!i.checked&&(o.disabled=!0),n.push(o)}}),e.request||(e.request={}),e.request.headers=n.length>0?n:void 0;let u=a("defaultAuthType").value;u==="bearer"?e.request.auth={type:"bearer",token:a("dAuthToken")?.value||""}:u==="basic"?e.request.auth={type:"basic",username:a("dAuthUser")?.value||"",password:a("dAuthPass")?.value||""}:u==="apikey"?e.request.auth={type:"apikey",key:a("dAuthKey")?.value||"",value:a("dAuthValue")?.value||""}:u==="inherit"?e.request.auth="inherit":delete e.request.auth;let l=[];document.querySelectorAll("#defaultVarsBody tr").forEach(s=>{let d=s.querySelectorAll('input[type="text"]'),i=s.querySelector('input[type="checkbox"]');if(d[0]?.value){let o={name:d[0].value,value:d[1]?.value||""};i&&!i.checked&&(o.disabled=!0),l.push(o)}}),e.request=e.request||{},e.request.variables=l.length>0?l:void 0,e.request&&Object.keys(e.request).every(s=>e.request[s]===void 0)&&delete e.request,f=!0,v.postMessage({type:"updateDocument",folder:e})}function H(e){let t=a(e);t&&t.querySelectorAll(".tab").forEach(n=>{n.addEventListener("click",()=>{let u=n.dataset.tab;t.querySelectorAll(".tab").forEach(d=>d.classList.remove("active")),n.classList.add("active");let l=t.parentElement;l.querySelectorAll(":scope > .tab-content > .tab-panel").forEach(d=>d.classList.remove("active"));let s=l.querySelector(`#panel-${u}`);s&&s.classList.add("active")})})}function g(e){let t=a("defaultHeadersBody");t.innerHTML="",(e||[]).forEach(n=>E(n.name,n.value,n.disabled))}function E(e,t,n){let u=a("defaultHeadersBody"),l=document.createElement("tr");l.innerHTML=`<td><input type="checkbox" ${n?"":"checked"} /></td><td><input type="text" value="${c(e||"")}" placeholder="Header name" /></td><td><input type="text" value="${c(t||"")}" placeholder="Header value" /></td><td><button class="row-delete">\xD7</button></td>`,l.querySelector(".row-delete").addEventListener("click",()=>{l.remove(),r()}),l.querySelectorAll("input").forEach(s=>{s.addEventListener("input",r),s.addEventListener("change",r)}),u.appendChild(l)}function A(e){let t=a("defaultVarsBody");t.innerHTML="",(e||[]).forEach(n=>L(n.name,n.value,n.disabled))}function L(e,t,n){let u=a("defaultVarsBody"),l=document.createElement("tr"),s=typeof t=="string"?t:t&&t.data?t.data:"";l.innerHTML=`<td><input type="checkbox" ${n?"":"checked"} /></td><td><input type="text" value="${c(e||"")}" placeholder="Variable name" /></td><td><input type="text" value="${c(s)}" placeholder="Variable value" /></td><td><button class="row-delete">\xD7</button></td>`,l.querySelector(".row-delete").addEventListener("click",()=>{l.remove(),r()}),l.querySelectorAll("input").forEach(d=>{d.addEventListener("input",r),d.addEventListener("change",r)}),u.appendChild(l)}function T(){let e=a("defaultAuthType").value,t=a("defaultAuthFields");t.innerHTML="",e==="bearer"?t.innerHTML='<div class="auth-row"><label>Token</label><input type="text" id="dAuthToken" placeholder="{{token}}" /></div>':e==="basic"?t.innerHTML='<div class="auth-row"><label>Username</label><input type="text" id="dAuthUser" /></div><div class="auth-row"><label>Password</label><input type="password" id="dAuthPass" /></div>':e==="apikey"&&(t.innerHTML='<div class="auth-row"><label>Key</label><input type="text" id="dAuthKey" placeholder="X-Api-Key" /></div><div class="auth-row"><label>Value</label><input type="text" id="dAuthValue" placeholder="{{apiKey}}" /></div>'),t.querySelectorAll("input").forEach(n=>n.addEventListener("input",r)),r()}function m(){a("headersBadge").textContent=String(document.querySelectorAll("#defaultHeadersBody tr").length),a("variablesBadge").textContent=String(document.querySelectorAll("#defaultVarsBody tr").length)}function M(e){y=!0,h=e,a("infoName").value=e.info?.name||"";let t=e.info?.description;a("infoDescription").value=typeof t=="string"?t:t?.content||"",a("folderName").textContent=e.info?.name||"Folder";let n=e.request?.auth;if(n==="inherit")a("defaultAuthType").value="inherit";else if(n?.type){if(a("defaultAuthType").value=n.type,T(),n.type==="bearer"){let u=document.getElementById("dAuthToken");u&&(u.value=n.token||"")}else if(n.type==="basic"){let u=document.getElementById("dAuthUser"),l=document.getElementById("dAuthPass");u&&(u.value=n.username||""),l&&(l.value=n.password||"")}else if(n.type==="apikey"){let u=document.getElementById("dAuthKey"),l=document.getElementById("dAuthValue");u&&(u.value=n.key||""),l&&(l.value=n.value||"")}}else a("defaultAuthType").value="none";g(e.request?.headers||[]),A(e.request?.variables||[]),m(),y=!1}H("mainTabs");a("defaultAuthType").addEventListener("change",T);a("addDefaultHeaderBtn").addEventListener("click",()=>{E(),m(),r()});a("addDefaultVarBtn").addEventListener("click",()=>{L(),m(),r()});a("infoName").addEventListener("input",()=>{a("folderName").textContent=a("infoName").value||"Folder",r()});a("infoDescription").addEventListener("input",r);window.addEventListener("message",e=>{let t=e.data;if(t.type==="folderLoaded"){if(f){f=!1;return}M(t.folder)}});v.postMessage({type:"ready"});})();

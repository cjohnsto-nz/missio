"use strict";(()=>{function b(t,n,e,a="text"){let o=`<input type="${a}" id="${t}" placeholder="${n}" />`;return e?`<span class="auth-input-wrap">${o}</span>`:o}function D(t,n){let{prefix:e,fieldsContainer:a,onChange:o,wrapInputs:s,showTokenStatus:l}=n;if(a.innerHTML="",t==="bearer")a.innerHTML=`<div class="auth-row"><label>Token</label>${b(e+"Token","{{token}}",s)}</div>`;else if(t==="basic")a.innerHTML=`<div class="auth-row"><label>Username</label>${b(e+"Username","username",s)}</div><div class="auth-row"><label>Password</label>${b(e+"Password","password",s,"password")}</div>`;else if(t==="apikey")a.innerHTML=`<div class="auth-row"><label>Key</label>${b(e+"Key","X-Api-Key",s)}</div><div class="auth-row"><label>Value</label>${b(e+"Value","{{apiKey}}",s)}</div><div class="auth-row"><label>In</label><select id="${e}Placement" class="auth-select"><option value="header">Header</option><option value="query">Query</option></select></div>`;else if(t==="oauth2"){a.innerHTML=`<div class="auth-row"><label>Grant Type</label><select id="${e}OAuth2Flow" class="auth-select"><option value="client_credentials">Client Credentials</option><option value="password">Password</option><option value="authorization_code">Authorization Code</option></select></div><div class="auth-row"><label>Access Token URL</label>${b(e+"OAuth2AccessTokenUrl","{{authUrl}}/token",s)}</div><div class="auth-row"><label>Client ID</label>${b(e+"OAuth2ClientId","{{clientId}}",s)}</div><div class="auth-row"><label>Client Secret</label>${b(e+"OAuth2ClientSecret","{{clientSecret}}",s)}</div><div class="auth-row"><label>Scope</label>${b(e+"OAuth2Scope","openid profile",s)}</div><div id="${e}OAuth2PasswordFields" style="display:none;"><div class="auth-row"><label>Username</label>${b(e+"OAuth2Username","{{username}}",s)}</div><div class="auth-row"><label>Password</label>${b(e+"OAuth2Password","password",s,"password")}</div></div><div id="${e}OAuth2AuthCodeFields" style="display:none;"><div class="auth-row"><label>Auth URL</label>${b(e+"OAuth2AuthorizationUrl","{{authUrl}}/authorize",s)}</div><div class="auth-row"><label>Callback URL</label>${b(e+"OAuth2CallbackUrl","https://localhost/callback",s)}</div></div><div class="auth-row"><label>Refresh URL</label>${b(e+"OAuth2RefreshTokenUrl","(optional)",s)}</div><div class="auth-row"><label>Credentials In</label><select id="${e}OAuth2CredentialsPlacement" class="auth-select"><option value="basic_auth_header">Header</option><option value="body">Body</option></select></div><div class="auth-row"><label>Auto Fetch</label><input type="checkbox" id="${e}OAuth2AutoFetch" checked /></div><div class="auth-row"><label>Auto Refresh</label><input type="checkbox" id="${e}OAuth2AutoRefresh" checked /></div>`+(l?`<div class="oauth2-token-status" id="${e}OAuth2TokenStatus"></div>`:"");let i=document.getElementById(e+"OAuth2Flow"),p=document.getElementById(e+"OAuth2PasswordFields"),v=document.getElementById(e+"OAuth2AuthCodeFields"),d=()=>{let c=i.value;p.style.display=c==="password"?"":"none",v.style.display=c==="authorization_code"?"":"none"};i.addEventListener("change",()=>{d(),o()}),d()}if(a.querySelectorAll("input").forEach(i=>{i.addEventListener("input",o),i.addEventListener("change",o)}),a.querySelectorAll("select").forEach(i=>i.addEventListener("change",o)),n.onFieldsRendered){let i=Array.from(a.querySelectorAll('input[type="text"]'));n.onFieldsRendered(i)}}function q(t,n){let e=n,a=s=>document.getElementById(s),o=s=>document.getElementById(s);switch(t){case"bearer":return{type:"bearer",token:a(e+"Token")?.value||""};case"basic":return{type:"basic",username:a(e+"Username")?.value||"",password:a(e+"Password")?.value||""};case"apikey":return{type:"apikey",key:a(e+"Key")?.value||"",value:a(e+"Value")?.value||"",placement:o(e+"Placement")?.value||"header"};case"oauth2":{let s=o(e+"OAuth2Flow")?.value||"client_credentials",l={type:"oauth2",flow:s,accessTokenUrl:a(e+"OAuth2AccessTokenUrl")?.value||"",clientId:a(e+"OAuth2ClientId")?.value||"",clientSecret:a(e+"OAuth2ClientSecret")?.value||"",scope:a(e+"OAuth2Scope")?.value||"",refreshTokenUrl:a(e+"OAuth2RefreshTokenUrl")?.value||"",credentialsPlacement:o(e+"OAuth2CredentialsPlacement")?.value||"basic_auth_header",autoFetchToken:a(e+"OAuth2AutoFetch")?.checked!==!1,autoRefreshToken:a(e+"OAuth2AutoRefresh")?.checked!==!1};return s==="password"?(l.username=a(e+"OAuth2Username")?.value||"",l.password=a(e+"OAuth2Password")?.value||""):s==="authorization_code"&&(l.authorizationUrl=a(e+"OAuth2AuthorizationUrl")?.value||"",l.callbackUrl=a(e+"OAuth2CallbackUrl")?.value||""),l.refreshTokenUrl||delete l.refreshTokenUrl,l.scope||delete l.scope,l.clientSecret||delete l.clientSecret,l}case"inherit":return"inherit";default:return}}function N(t,n){let e=n,a=s=>document.getElementById(s),o=s=>document.getElementById(s);if(!(!t||t==="inherit")&&!(typeof t!="object"||!t.type))switch(t.type){case"bearer":{let s=a(e+"Token");s&&(s.value=t.token||"");break}case"basic":{let s=a(e+"Username");s&&(s.value=t.username||"");let l=a(e+"Password");l&&(l.value=t.password||"");break}case"apikey":{let s=a(e+"Key");s&&(s.value=t.key||"");let l=a(e+"Value");l&&(l.value=t.value||"");let i=o(e+"Placement");i&&(i.value=t.placement||"header");break}case"oauth2":{let s=o(e+"OAuth2Flow");s&&(s.value=t.flow||"client_credentials",s.dispatchEvent(new Event("change")));let l=a(e+"OAuth2AccessTokenUrl");l&&(l.value=t.accessTokenUrl||"");let i=a(e+"OAuth2ClientId");i&&(i.value=t.clientId||"");let p=a(e+"OAuth2ClientSecret");p&&(p.value=t.clientSecret||"");let v=a(e+"OAuth2Scope");v&&(v.value=t.scope||"");let d=a(e+"OAuth2RefreshTokenUrl");d&&(d.value=t.refreshTokenUrl||"");let c=o(e+"OAuth2CredentialsPlacement");c&&(c.value=t.credentialsPlacement||"basic_auth_header");let m=a(e+"OAuth2AutoFetch");m&&(m.checked=t.autoFetchToken!==!1);let k=a(e+"OAuth2AutoRefresh");if(k&&(k.checked=t.autoRefreshToken!==!1),t.flow==="password"){let g=a(e+"OAuth2Username");g&&(g.value=t.username||"");let E=a(e+"OAuth2Password");E&&(E.value=t.password||"")}else if(t.flow==="authorization_code"){let g=a(e+"OAuth2AuthorizationUrl");g&&(g.value=t.authorizationUrl||"");let E=a(e+"OAuth2CallbackUrl");E&&(E.value=t.callbackUrl||"")}break}}}var L=null;function w(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function _(t){L&&!L.contains(t.target)&&I()}function I(){L&&(L.remove(),L=null),document.removeEventListener("click",_)}function z(t,n,e){I();let a=t.getBoundingClientRect(),o=e.getResolvedVariables(),s=e.getVariableSources(),l=n in o,i=s[n]||"unknown",p=i.charAt(0).toUpperCase()+i.slice(1),v=document.createElement("div");v.className="var-tooltip";let d=[];e.onEditVariable&&d.push("<button class='var-action-btn' data-action='edit'>Edit</button>"),d.push("<button class='var-action-btn' data-action='copy'>"+(l?"Copy Value":"Copy Name")+"</button>"),v.innerHTML="<div class='var-name'>{{"+w(n)+"}}</div>"+(l?"<div class='var-source tk-src-"+w(i)+"'>"+w(p)+"</div><div class='var-value'>"+w(o[n])+"</div>":"<div class='var-unresolved'>Unresolved variable</div>")+"<div class='var-actions'>"+d.join("")+"</div>",v.style.left=a.left+"px",v.style.top=a.bottom+4+"px",document.body.appendChild(v),L=v,v.querySelectorAll(".var-action-btn").forEach(c=>{c.addEventListener("click",()=>{let m=c.dataset.action;if(m==="edit"&&e.onEditVariable)e.onEditVariable(n);else if(m==="copy"){let k=l?o[n]:"{{"+n+"}}";navigator.clipboard.writeText(k).catch(()=>{})}I()})}),setTimeout(()=>{document.addEventListener("click",_)},0)}function ne(t){if(t<=0)return"expired";let n=Math.floor(t/1e3);if(n<60)return`${n}s`;let e=Math.floor(n/60);return e<60?`${e}m ${n%60}s`:`${Math.floor(e/60)}h ${e%60}m`}function K(t){let n=`${t.prefix}OAuth2TokenStatus`,e=null,a=null;function o(){return document.getElementById(n)}function s(){e&&(clearInterval(e),e=null)}function l(){let c=t.buildAuth();!c||c.type!=="oauth2"||!c.accessTokenUrl||t.postMessage({type:"getTokenStatus",auth:c})}function i(c){let m=o();if(!m)return;if(!c?.hasToken){m.innerHTML=`<div class="token-status token-none"><span class="token-dot dot-none"></span> No token<button class="token-btn" id="${n}-get">Get Token</button></div>`,m.querySelector(`#${n}-get`)?.addEventListener("click",()=>{let O=t.buildAuth();t.postMessage({type:"getToken",auth:O})});return}let k=Date.now(),g=c.expiresAt?c.expiresAt-k:void 0,E=g!==void 0&&g<=0,ee=E?"dot-expired":"dot-valid",te=E?"Expired":g!==void 0?`Expires in ${ne(g)}`:"Valid (no expiry)",P=c.expiresAt?new Date(c.expiresAt).toLocaleTimeString():"";m.innerHTML='<div class="token-status '+(E?"token-expired":"token-valid")+'"><span class="token-dot '+ee+'"></span> '+te+(P?'<span class="token-expiry-time"> ('+t.esc(P)+")</span>":"")+`<button class="token-btn" id="${n}-refresh">${E?"Get Token":"Refresh"}</button></div>`,m.querySelector(`#${n}-refresh`)?.addEventListener("click",()=>{let O=t.buildAuth();t.postMessage({type:"getToken",auth:O})})}function p(c){a=c,s(),i(c),c?.expiresAt&&(e=setInterval(()=>{i(a),a?.expiresAt&&Date.now()>a.expiresAt&&s()},1e3))}function v(c){let m=o();if(!m||!c)return;s();let k=c.startsWith("Error:");m.innerHTML='<div class="token-status '+(k?"token-error":"token-progress")+'">'+(k?'<span class="token-dot dot-expired"></span> ':'<span class="token-spinner"></span> ')+t.esc(c)+"</div>"}function d(){s()}return{requestStatus:l,handleStatus:p,handleProgress:v,dispose:d}}var R=acquireVsCodeApi(),h=null,B=!1,U=!1,f=-1,$=null;function r(t){return document.getElementById(t)}function y(t){if(!t)return"";let n=document.createElement("div");return n.textContent=t,n.innerHTML}var H={},F={},x=!1;function A(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(t){return t.replace(/\{\{(\s*[\w.]+\s*)\}\}/g,(n,e)=>{let a=e.trim(),o=a in H,s=F[a]||"unknown";return x&&o?"<span class='"+("tk-var-resolved tk-src-"+s)+"' data-var='"+A(a)+"' title='{{"+A(a)+"}} ("+s+")'>"+A(H[a])+"</span>":"<span class='"+(o?"tk-var tk-src-"+s:"tk-var tk-var-unresolved")+"' data-var='"+A(a)+"'>{{"+A(e)+"}}</span>"})}function C(t){let n=t.parentElement;n.classList.add("var-cell");let e=document.createElement("div");e.className="var-overlay",n.appendChild(e);function a(){e.innerHTML=j(A(t.value))}function o(){n.classList.add("var-overlay-active"),a()}function s(){n.classList.remove("var-overlay-active")}t.addEventListener("input",a),t.addEventListener("focus",s),t.addEventListener("blur",o),e.addEventListener("click",l=>{let i=l.target.closest(".tk-var, .tk-var-resolved");i&&i.dataset.var?z(i,i.dataset.var,{getResolvedVariables:()=>H,getVariableSources:()=>F}):(s(),t.focus())}),document.activeElement!==t&&o()}function G(){document.querySelectorAll(".var-cell").forEach(t=>{let n=t.querySelector('input[type="text"]'),e=t.querySelector(".var-overlay");n&&e&&t.classList.contains("var-overlay-active")&&(e.innerHTML=j(A(n.value)))})}function u(){U||($&&clearTimeout($),$=setTimeout(()=>{h&&ae()},400))}function ae(){let t=JSON.parse(JSON.stringify(h));t.info=t.info||{},t.info.name=r("infoName").value||void 0,t.info.version=r("infoVersion").value||void 0;let n=r("infoSummary").value;n?t.info.summary=n:delete t.info.summary;let e=[];document.querySelectorAll("#defaultHeadersBody tr").forEach(l=>{let i=l.querySelectorAll('input[type="text"]'),p=l.querySelector('input[type="checkbox"]');if(i[0]?.value){let v={name:i[0].value,value:i[1]?.value||""};p&&!p.checked&&(v.disabled=!0),e.push(v)}}),t.request||(t.request={}),t.request.headers=e.length>0?e:void 0;let a=r("defaultAuthType").value,o=q(a,"dAuth");o!==void 0?t.request.auth=o:delete t.request.auth;let s=[];document.querySelectorAll("#defaultVarsBody tr").forEach(l=>{let i=l.querySelectorAll('input[type="text"]'),p=l.querySelector('input[type="checkbox"]');if(i[0]?.value){let v={name:i[0].value,value:i[1]?.value||""};p&&!p.checked&&(v.disabled=!0),s.push(v)}}),t.request=t.request||{},t.request.variables=s.length>0?s:void 0,t.request&&Object.keys(t.request).every(l=>t.request[l]===void 0)&&delete t.request,B=!0,R.postMessage({type:"updateDocument",collection:t})}function J(t){let n=r(t);n&&n.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",()=>{let a=e.dataset.tab;n.querySelectorAll(".tab").forEach(l=>l.classList.remove("active")),e.classList.add("active");let o=n.parentElement;o.querySelectorAll(":scope > .tab-content > .tab-panel").forEach(l=>l.classList.remove("active"));let s=o.querySelector(`#panel-${a}`);s&&s.classList.add("active")})})}function se(t){let n=r("defaultHeadersBody");n.innerHTML="",(t||[]).forEach(e=>W(e.name,e.value,e.disabled))}function W(t,n,e){let a=r("defaultHeadersBody"),o=document.createElement("tr");o.innerHTML=`<td><input type="checkbox" ${e?"":"checked"} /></td><td><input type="text" value="${y(t||"")}" placeholder="Header name" /></td><td><input type="text" value="${y(n||"")}" placeholder="Header value" /></td><td><button class="row-delete">\xD7</button></td>`,o.querySelector(".row-delete").addEventListener("click",()=>{o.remove(),u()}),o.querySelectorAll("input").forEach(l=>{l.addEventListener("input",u),l.addEventListener("change",u)});let s=o.querySelectorAll('input[type="text"]')[1];s&&C(s),a.appendChild(o)}function oe(t){let n=r("defaultVarsBody");n.innerHTML="",(t||[]).forEach(e=>Y(e.name,e.value,e.disabled))}function Y(t,n,e){let a=r("defaultVarsBody"),o=document.createElement("tr"),s=typeof n=="string"?n:n&&n.data?n.data:"";o.innerHTML=`<td><input type="checkbox" ${e?"":"checked"} /></td><td><input type="text" value="${y(t||"")}" placeholder="Variable name" /></td><td><input type="text" value="${y(s)}" placeholder="Variable value" /></td><td><button class="row-delete">\xD7</button></td>`,o.querySelector(".row-delete").addEventListener("click",()=>{o.remove(),u()}),o.querySelectorAll("input").forEach(i=>{i.addEventListener("input",u),i.addEventListener("change",u)});let l=o.querySelectorAll('input[type="text"]')[1];l&&C(l),a.appendChild(o)}var le={prefix:"dAuth",get fieldsContainer(){return r("defaultAuthFields")},onChange:()=>u(),showInherit:!1,wrapInputs:!0,showTokenStatus:!0,onFieldsRendered:t=>t.forEach(n=>C(n))},M=K({prefix:"dAuth",buildAuth:()=>q(r("defaultAuthType").value,"dAuth"),postMessage:t=>R.postMessage(t),esc:y});function Q(){let t=r("defaultAuthType").value;D(t,le),t==="oauth2"&&M.requestStatus()}var X=[{token:"charts.red",hex:"var(--vscode-charts-red, #f14c4c)"},{token:"charts.orange",hex:"var(--vscode-charts-orange, #d18616)"},{token:"charts.yellow",hex:"var(--vscode-charts-yellow, #cca700)"},{token:"charts.green",hex:"var(--vscode-charts-green, #89d185)"},{token:"charts.blue",hex:"var(--vscode-charts-blue, #3794ff)"},{token:"charts.purple",hex:"var(--vscode-charts-purple, #b180d7)"},{token:"charts.foreground",hex:"var(--vscode-charts-foreground, #cccccc)"},{token:"terminal.ansiRed",hex:"var(--vscode-terminal-ansiRed, #cd3131)"},{token:"terminal.ansiGreen",hex:"var(--vscode-terminal-ansiGreen, #0dbc79)"},{token:"terminal.ansiYellow",hex:"var(--vscode-terminal-ansiYellow, #e5e510)"},{token:"terminal.ansiBlue",hex:"var(--vscode-terminal-ansiBlue, #2472c8)"},{token:"terminal.ansiMagenta",hex:"var(--vscode-terminal-ansiMagenta, #bc3fbc)"},{token:"terminal.ansiCyan",hex:"var(--vscode-terminal-ansiCyan, #11a8cd)"},{token:"terminal.ansiWhite",hex:"var(--vscode-terminal-ansiWhite, #e5e5e5)"}];function S(){let t=r("envSelector");t.innerHTML="";let n=h?.config?.environments||[];if(n.length===0){let e=document.createElement("option");e.value="-1",e.textContent="No environments",t.appendChild(e),t.disabled=!0}else t.disabled=!1,n.forEach((e,a)=>{let o=document.createElement("option");o.value=String(a),o.textContent=e.name||"Unnamed",t.appendChild(o)}),t.value=String(f)}function Z(t){f=t,S(),T()}function ie(){let t=h?.config?.environments||[];f<0||f>=t.length||(t.splice(f,1),f>=t.length&&(f=t.length-1),S(),T(),u())}function re(){h.config||(h.config={}),h.config.environments||(h.config.environments=[]),h.config.environments.push({name:"new-environment",variables:[]}),f=h.config.environments.length-1,S(),T(),u()}function V(){let t=document.querySelector(".swatch-popover");t&&t.remove()}function ce(t,n){V();let e=document.createElement("div");e.className="swatch-popover",X.forEach(o=>{let s=document.createElement("button");s.className="color-swatch"+(o.token===n.color?" active":""),s.style.background=o.hex,s.addEventListener("click",l=>{l.stopPropagation(),n.color=o.token,V(),S(),T(),u()}),e.appendChild(s)});let a=t.getBoundingClientRect();e.style.top=a.bottom+4+"px",e.style.left=a.left+"px",document.body.appendChild(e),setTimeout(()=>{document.addEventListener("click",function o(){V(),document.removeEventListener("click",o)})},0)}function T(){let t=r("envDetail"),n=h?.config?.environments||[];if(f<0||f>=n.length){t.innerHTML='<div class="env-detail-empty">Add an environment to get started</div>';return}let e=n[f],a=e.color||"",o=X.find(i=>i.token===a),s=o?o.hex:"var(--vscode-charts-foreground, #888)";t.innerHTML='<div class="env-meta"><button class="color-dot-btn" id="envColorBtn" style="background:'+s+'" title="Pick color"></button><div class="form-field name"><label>Name</label><input type="text" id="envName" value="'+y(e.name)+'" /></div><div class="form-field extends"><label>Extends</label><input type="text" id="envExtends" value="'+y(e.extends||"")+'" placeholder="parent env name" /></div></div><div class="tabs" id="envTabs"><div class="tab active" data-tab="env-vars">Variables <span class="badge" id="envVarsBadge">'+(e.variables?e.variables.length:0)+'</span></div><div class="tab" data-tab="env-settings">Settings</div></div><div class="tab-content"><div class="tab-panel active" id="panel-env-vars"><table class="kv-table"><thead><tr><th></th><th>Name</th><th>Value</th><th>Type</th><th></th></tr></thead><tbody id="envVarsBody"></tbody></table><button class="add-row-btn" id="addEnvVarBtn">+ Add Variable</button></div><div class="tab-panel" id="panel-env-settings"><div class="auth-section"><div class="auth-row"><label>dotenv File</label><input type="text" id="envDotenv" value="'+y(e.dotEnvFilePath||"")+'" placeholder=".env.local" /></div></div></div></div>',r("envName").addEventListener("input",()=>{e.name=r("envName").value,S(),u()}),r("envColorBtn").addEventListener("click",i=>{i.stopPropagation(),ce(r("envColorBtn"),e)}),r("envExtends").addEventListener("input",()=>{let i=r("envExtends").value;i?e.extends=i:delete e.extends,u()}),r("envDotenv")?.addEventListener("input",()=>{let i=r("envDotenv").value;i?e.dotEnvFilePath=i:delete e.dotEnvFilePath,u()});let l=r("envVarsBody");(e.variables||[]).forEach((i,p)=>{de(l,e,p)}),r("addEnvVarBtn").addEventListener("click",()=>{e.variables||(e.variables=[]),e.variables.push({name:"",value:""}),T(),u()}),J("envTabs")}function de(t,n,e){let a=n.variables[e],o=document.createElement("tr"),s=a.secret===!0,l=a.disabled?"":"checked",i=s?a.value||"":typeof a.value=="string"?a.value:a.value&&a.value.data?a.value.data:"";o.innerHTML=`<td><input type="checkbox" ${l} data-field="disabled" /></td><td><input type="text" value="${y(a.name||"")}" data-field="name" /></td><td>${s?'<div class="secret-value-wrap"><input type="password" value="'+y(i)+'" data-field="value" /><button class="secret-toggle" title="Show/hide">&#9673;</button></div>':'<input type="text" value="'+y(i)+'" data-field="value" />'}</td><td><select class="type-select" data-field="type"><option value="var"${s?"":" selected"}>var</option><option value="secret"${s?" selected":""}>secret</option></select></td><td><button class="row-delete">\xD7</button></td>`,o.querySelectorAll("input[data-field]").forEach(d=>{let c=d.dataset.field;d.type==="checkbox"?d.addEventListener("change",()=>{n.variables[e].disabled=!d.checked,u()}):d.addEventListener("input",()=>{n.variables[e][c]=d.value,u()})});let p=o.querySelector(".type-select");if(p?.addEventListener("change",()=>{p.value==="secret"?n.variables[e].secret=!0:delete n.variables[e].secret,T(),u()}),o.querySelector(".secret-toggle")?.addEventListener("click",()=>{let d=o.querySelector('input[data-field="value"]');d&&(d.type=d.type==="password"?"text":"password")}),o.querySelector(".row-delete")?.addEventListener("click",()=>{n.variables.splice(e,1),T(),u()}),!s){let d=o.querySelector('input[data-field="value"]');d&&C(d)}t.appendChild(o)}function ue(t){U=!0,h=JSON.parse(JSON.stringify(t)),r("collectionName").textContent=t.info?.name||"Collection",r("infoName").value=t.info?.name||"",r("infoVersion").value=t.info?.version||"",r("infoSummary").value=t.info?.summary||"",se(t.request?.headers||[]),oe(t.request?.variables||[]);let n=t.request?.auth;n&&typeof n=="object"&&n.type?r("defaultAuthType").value=n.type:r("defaultAuthType").value="none",Q(),n&&typeof n=="object"&&n.type&&setTimeout(()=>{N(n,"dAuth")},0),r("headersBadge").textContent=String((t.request?.headers||[]).length),r("variablesBadge").textContent=String((t.request?.variables||[]).length);let e=h?.config?.environments||[];r("envBadge").textContent=String(e.length),f<0&&e.length>0&&(f=0),f>=e.length&&(f=e.length-1),S(),T(),setTimeout(()=>{U=!1},50)}window.addEventListener("message",t=>{let n=t.data;if(n.type==="collectionLoaded"){if(B){B=!1;return}ue(n.collection)}if(n.type==="variablesResolved"&&(H=n.variables||{},F=n.sources||{},G(),M.requestStatus()),n.type==="oauth2TokenStatus"&&M.handleStatus(n.status),n.type==="oauth2Progress"&&M.handleProgress(n.message),n.type==="switchTab"){let e=n.tab,o=r("mainTabs").querySelector(`.tab[data-tab="${e}"]`);if(o&&o.click(),n.envName&&h?.config?.environments){let l=h.config.environments.findIndex(i=>i.name===n.envName);l>=0&&Z(l)}}});J("mainTabs");r("addDefaultHeaderBtn").addEventListener("click",()=>{W(),u()});r("addDefaultVarBtn").addEventListener("click",()=>{Y(),u()});r("defaultAuthType").addEventListener("change",Q);r("varToggleBtn").addEventListener("click",()=>{x=!x,r("varToggleBtn").classList.toggle("active",x),G()});r("addEnvBtn").addEventListener("click",re);r("removeEnvBtn").addEventListener("click",ie);r("envSelector").addEventListener("change",()=>{let t=parseInt(r("envSelector").value,10);t>=0&&Z(t)});["infoName","infoVersion"].forEach(t=>{r(t).addEventListener("input",u)});r("infoSummary").addEventListener("input",u);R.postMessage({type:"ready"});})();

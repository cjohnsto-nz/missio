"use strict";(()=>{var v=acquireVsCodeApi(),T=null,y={},x=null,O=!1,M="none",H="json";function ne(e){T=e}function se(e){y=e}function F(e){x=e}function A(e){O=e}function oe(e){M=e}function D(e){H=e}function o(e){return document.getElementById(e)}function c(e){return document.getElementById(e)}function L(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}function m(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ce(e){let t=m(e);return t=t.replace(/(")((?:[^"\\]|\\.)*)(")\s*:/g,"<span class='tk-key'>&quot;$2&quot;</span>:"),t=t.replace(/(")((?:[^"\\]|\\.)*)(")/g,"<span class='tk-str'>&quot;$2&quot;</span>"),t=t.replace(/\b(-?\d+\.?\d*(?:e[+-]?\d+)?)\b/gi,"<span class='tk-num'>$1</span>"),t=t.replace(/\b(true|false|null)\b/g,"<span class='tk-kw'>$1</span>"),t}function Se(e){let t=m(e);return t=t.replace(/(&lt;\/?)([\w:-]+)/g,"$1<span class='tk-tag'>$2</span>"),t=t.replace(/([\w:-]+)(=)(")((?:[^"]*))(")/g,"<span class='tk-attr'>$1</span>$2<span class='tk-str'>&quot;$4&quot;</span>"),t}function K(e){return e.replace(/\{\{(\s*[\w.]+\s*)\}\}/g,(t,s)=>{let a=s.trim();return"<span class='"+(a in y?"tk-var":"tk-var tk-var-unresolved")+"' data-var='"+m(a)+"'>{{"+m(s)+"}}</span>"})}function I(e,t){let s;return t==="json"?s=Ce(e):t==="xml"||t==="html"?s=Se(e):s=m(e),K(s)}var i=null,g=[],h=0,w=null,k=0,V=!1;function ae(e,t){let s=e.substring(0,t),a=s.lastIndexOf("{{");if(a===-1)return null;let n=s.substring(a+2);if(n.includes("}}"))return null;let l=n.trim();return/^[\w.]*$/.test(l)?l:null}function le(e,t){let s=e.selectionStart??0,a=ae(e.value,s);if(a===null){f();return}w=e,V=!1,k=e.value.lastIndexOf("{{",s-1),ie(a,e,t)}function re(e,t){let s=window.getSelection();if(!s||s.rangeCount===0)return;let a=e.textContent||"",n=s.getRangeAt(0),l=document.createRange();l.selectNodeContents(e),l.setEnd(n.startContainer,n.startOffset);let r=l.toString().length,d=ae(a,r);if(d===null){f();return}w=e,V=!0,k=a.lastIndexOf("{{",r-1),ie(d,e,t)}function ie(e,t,s){let a=Object.keys(y);if(a.length===0){f();return}let n=e.toLowerCase();if(g=a.filter(l=>l.toLowerCase().startsWith(n)),g.length===0){f();return}h=0,i||(i=document.createElement("div"),i.className="var-autocomplete",document.body.appendChild(i)),$(),Be(t)}function $(){i&&(i.innerHTML=g.map((e,t)=>{let s=y[e]||"";return"<div class='"+(t===h?"var-autocomplete-item selected":"var-autocomplete-item")+"' data-index='"+t+"'><span class='var-ac-name'>"+m(e)+"</span><span class='var-ac-value'>"+m(s)+"</span></div>"}).join(""),i.querySelectorAll(".var-autocomplete-item").forEach(e=>{e.addEventListener("mousedown",t=>{t.preventDefault();let s=parseInt(e.dataset.index||"0");me(g[s])})}))}function Re(e){let t=document.createElement("div"),s=window.getComputedStyle(e);["fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","paddingTop","paddingLeft","paddingRight","paddingBottom","borderWidth","boxSizing","whiteSpace","wordWrap","overflowWrap","tabSize"].forEach(E=>{t.style[E]=s.getPropertyValue(E.replace(/[A-Z]/g,q=>"-"+q.toLowerCase()))}),t.style.position="absolute",t.style.visibility="hidden",t.style.whiteSpace="pre-wrap",t.style.wordWrap="break-word",t.style.width=e.clientWidth+"px";let n=e.value.substring(0,e.selectionStart??0);t.textContent=n;let l=document.createElement("span");l.textContent="|",t.appendChild(l),document.body.appendChild(t);let r=l.getBoundingClientRect(),d=e.getBoundingClientRect(),p={top:d.top+(r.top-t.getBoundingClientRect().top)-e.scrollTop,left:d.left+(r.left-t.getBoundingClientRect().left)-e.scrollLeft};return document.body.removeChild(t),p}function Be(e){if(i){if(V){let t=window.getSelection();if(t&&t.rangeCount>0){let a=t.getRangeAt(0).getBoundingClientRect();i.style.left=a.left+"px",i.style.top=a.bottom+4+"px"}else{let s=e.getBoundingClientRect();i.style.left=s.left+"px",i.style.top=s.bottom+2+"px"}}else{let t=Re(e);i.style.left=t.left+"px",i.style.top=t.top+18+"px"}i.style.minWidth="220px"}}var de=null,ce=null,ue=null;function pe(e,t,s){de=e,ce=t,ue=s}function me(e){if(w){if(V){let t=w,s=t.textContent||"",a=window.getSelection(),n=s.length;if(a&&a.rangeCount>0){let q=a.getRangeAt(0),U=document.createRange();U.selectNodeContents(t),U.setEnd(q.startContainer,q.startOffset),n=U.toString().length}let l="{{"+e+"}}",r=n;s.substring(n).startsWith("}}")&&(r+=2);let p=s.substring(0,k)+l+s.substring(r);t.textContent=p,ce?.();let E=k+l.length;ue?.(t,E)}else{let t=w,s=t.value,a=t.selectionStart??s.length,n="{{"+e+"}}",l=a;s.substring(a).startsWith("}}")&&(l+=2),t.value=s.substring(0,k)+n+s.substring(l);let d=k+n.length;t.selectionStart=d,t.selectionEnd=d,t.focus(),de?.()}f()}}function f(){i&&(i.remove(),i=null),w=null,g=[],h=0}function W(e){return!i||g.length===0?!1:e.key==="ArrowDown"?(e.preventDefault(),h=(h+1)%g.length,$(),!0):e.key==="ArrowUp"?(e.preventDefault(),h=(h-1+g.length)%g.length,$(),!0):e.key==="Enter"||e.key==="Tab"?(e.preventDefault(),me(g[h]),!0):e.key==="Escape"?(e.preventDefault(),f(),!0):!1}function j(){return i!==null}var z=null,_="";function J(){return z}function ge(){return _}function fe(){o("respLoading").style.display="flex",o("respEmpty").style.display="none",o("respBodyWrap").style.display="none",o("responseBar").style.display="none",o("respTabs").style.display="none"}function X(){o("respLoading").style.display="none"}function ve(){o("responseBar").style.display="none",o("respTabs").style.display="none",o("respBodyWrap").style.display="none",o("respEmpty").style.display="block",z=null,_=""}function qe(e){let t=o("respLineNumbers"),s=(e.match(/\n/g)||[]).length+1,a="";for(let n=1;n<=s;n++)a+="<span>"+n+"</span>";t.innerHTML=a}function Ae(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}function ye(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}function Y(e){X(),z=e,o("sendBtn").classList.remove("sending"),o("sendBtn").disabled=!1,o("sendBtn").textContent="Send",o("responseBar").style.display="flex",o("respTabs").style.display="flex",o("respEmpty").style.display="none",o("respBodyWrap").style.display="block";let t=o("statusBadge");t.textContent=e.status+" "+e.statusText;let s=Math.floor(e.status/100);t.className="status-badge s"+s+"xx",o("responseMeta").textContent=e.duration+"ms \u2022 "+Ae(e.size);let a=e.body||"",n=e.headers&&e.headers["content-type"]||"",l="text";if(n.includes("json")){l="json";try{a=JSON.stringify(JSON.parse(a),null,2)}catch{}}else n.includes("xml")?l="xml":n.includes("html")&&(l="html");_=a,o("respBodyPre").innerHTML=I(a,l)+`
`,qe(a);let r=o("respHeadersBody");r.innerHTML="",e.headers&&Object.entries(e.headers).forEach(([d,p])=>{let E=document.createElement("tr");E.innerHTML="<td>"+ye(d)+"</td><td>"+ye(String(p))+"</td>",r.appendChild(E)})}function u(){x&&clearTimeout(x),F(setTimeout(()=>{A(!0);let e=N();v.postMessage({type:"updateDocument",request:e})},300))}var De=["body","auth","headers","params","settings"],Ie=["resp-body","resp-headers"];function Ee(e,t,s){e.querySelectorAll(".tab").forEach(n=>n.classList.remove("active"));let a=e.querySelector(`[data-tab="${t}"]`);a&&a.classList.add("active"),s.forEach(n=>{let l=document.getElementById("panel-"+n);l&&l.classList.toggle("active",n===t)})}o("reqTabs").querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",()=>{Ee(o("reqTabs"),e.dataset.tab,De)})});o("respTabs").querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",()=>{Ee(o("respTabs"),e.dataset.tab,Ie)})});var G=o("divider"),he=o("requestSection"),be=o("responseSection"),ee=!1;G.addEventListener("mousedown",()=>{ee=!0,G.classList.add("dragging"),document.body.style.cursor="ns-resize",document.body.style.userSelect="none"});document.addEventListener("mousemove",e=>{if(!ee)return;let s=document.querySelector(".main-content").getBoundingClientRect(),a=e.clientY-s.top,n=s.height,l=Math.max(15,Math.min(85,a/n*100));he.style.flex="none",he.style.height=l+"%",be.style.flex="none",be.style.height=100-l+"%"});document.addEventListener("mouseup",()=>{ee=!1,G.classList.remove("dragging"),document.body.style.cursor="",document.body.style.userSelect=""});var S=o("method");function Le(){S.className="method-select "+S.value.toLowerCase()}S.addEventListener("change",()=>{Le(),u(),v.postMessage({type:"methodChanged",method:S.value})});function Te(e="",t="",s="query",a=!1){let n=o("paramsBody"),l=document.createElement("tr");l.innerHTML='<td><input type="checkbox" class="p-enabled" '+(a?"":"checked")+' /></td><td><input type="text" class="p-name" value="'+L(e)+'" placeholder="name" /></td><td><input type="text" class="p-value" value="'+L(t)+'" placeholder="value" /></td><td><select class="p-type auth-select" style="margin:0;"><option value="query"'+(s==="query"?" selected":"")+'>query</option><option value="path"'+(s==="path"?" selected":"")+'>path</option></select></td><td><button class="row-delete">\xD7</button></td>',l.querySelector(".row-delete").addEventListener("click",()=>{l.remove(),R(),u()}),l.addEventListener("input",u),l.addEventListener("change",u),n.appendChild(l),R()}function xe(e="",t="",s=!1){let a=o("headersBody"),n=document.createElement("tr");n.innerHTML='<td><input type="checkbox" class="h-enabled" '+(s?"":"checked")+' /></td><td><input type="text" class="h-name" value="'+L(e)+'" placeholder="name" /></td><td><input type="text" class="h-value" value="'+L(t)+'" placeholder="value" /></td><td><button class="row-delete">\xD7</button></td>',n.querySelector(".row-delete").addEventListener("click",()=>{n.remove(),R(),u()}),n.addEventListener("input",u),n.addEventListener("change",u),a.appendChild(n),R()}function Me(e="",t="",s=!1){let a=o("bodyFormBody"),n=document.createElement("tr");n.innerHTML='<td><input type="checkbox" class="f-enabled" '+(s?"":"checked")+' /></td><td><input type="text" class="f-name" value="'+L(e)+'" placeholder="name" /></td><td><input type="text" class="f-value" value="'+L(t)+'" placeholder="value" /></td><td><button class="row-delete">\xD7</button></td>',n.querySelector(".row-delete").addEventListener("click",()=>{n.remove(),u()}),n.addEventListener("input",u),n.addEventListener("change",u),a.appendChild(n)}function R(){let e=document.querySelectorAll("#paramsBody tr"),t=document.querySelectorAll("#headersBody tr");o("paramsBadge").textContent=String(e.length),o("headersBadge").textContent=String(t.length)}function P(e){oe(e),document.querySelectorAll("#bodyTypePills .pill").forEach(n=>{n.classList.toggle("active",n.dataset.bodyType===e)});let t=o("bodyRawEditor"),s=o("bodyFormEditor"),a=o("bodyLangMode");e==="none"?(t.style.display="none",s.style.display="none",a.style.display="none"):e==="form-urlencoded"||e==="multipart-form"?(t.style.display="none",s.style.display="block",a.style.display="none"):(t.style.display="flex",t.style.flexDirection="column",t.style.flex="1",s.style.display="none",a.style.display="block")}document.querySelectorAll("#bodyTypePills .pill").forEach(e=>{e.addEventListener("click",()=>{P(e.dataset.bodyType)})});function He(){let e=o("bodyData"),t=o("lineNumbers"),s=(e.value.match(/\n/g)||[]).length+1;if(t.children.length!==s){let n="";for(let l=1;l<=s;l++)n+="<span>"+l+"</span>";t.innerHTML=n}t.style.top=-e.scrollTop+"px"}function b(){try{let e=o("bodyData"),t=o("bodyHighlight");t.innerHTML=I(e.value,H)+`
`,He()}catch{}}var C=null;function te(e,t){Q();let s=e.getBoundingClientRect(),a=t in y,n=document.createElement("div");n.className="var-tooltip",n.innerHTML="<div class='var-name'>{{"+m(t)+"}}</div>"+(a?"<div class='var-value'>"+m(y[t])+"</div>":"<div class='var-unresolved'>Unresolved variable</div>")+"<div class='var-actions'><button class='var-action-btn' data-action='edit'>Edit Variable</button><button class='var-action-btn' data-action='copy'>"+(a?"Copy Value":"Copy Name")+"</button></div>",n.style.left=s.left+"px",n.style.top=s.bottom+4+"px",document.body.appendChild(n),C=n,n.querySelectorAll(".var-action-btn").forEach(l=>{l.addEventListener("click",()=>{let r=l.dataset.action;if(r==="edit")v.postMessage({type:"editVariable",variableName:t});else if(r==="copy"){let d=a?y[t]:"{{"+t+"}}";navigator.clipboard.writeText(d).catch(()=>{})}Q()})}),setTimeout(()=>{document.addEventListener("click",ke)},0)}function Q(){C&&(C.remove(),C=null),document.removeEventListener("click",ke)}function ke(e){C&&!C.contains(e.target)&&Q()}o("bodyHighlight").addEventListener("click",e=>{let t=e.target.closest(".tk-var");t&&t.dataset.var&&te(t,t.dataset.var)});function Ve(){return o("url").textContent||""}function Pe(e){o("url").textContent=e,B()}function B(){let e=o("url"),t=e.textContent||"";if(!t){e.innerHTML="";return}let s=window.getSelection(),a=0;if(s&&s.rangeCount>0){let n=s.getRangeAt(0),l=document.createRange();l.selectNodeContents(e),l.setEnd(n.startContainer,n.startOffset),a=l.toString().length}e.innerHTML=K(m(t)),s&&document.activeElement===e&&we(e,a)}function we(e,t){let s=window.getSelection();if(!s)return;let a=document.createRange(),n=0,l=!1;function r(d){if(d.nodeType===Node.TEXT_NODE){let p=(d.textContent||"").length;if(n+p>=t)return a.setStart(d,t-n),a.collapse(!0),!0;n+=p}else for(let p=0;p<d.childNodes.length;p++)if(r(d.childNodes[p]))return!0;return!1}l=r(e),l||(a.selectNodeContents(e),a.collapse(!1)),s.removeAllRanges(),s.addRange(a)}pe(b,B,we);o("url").addEventListener("click",e=>{let t=e.target.closest(".tk-var");t&&t.dataset.var&&te(t,t.dataset.var)});o("url").addEventListener("input",()=>{B(),re(o("url"),B),u()});function Ne(){let e=o("bodyData"),t=o("bodyHighlight");t.scrollTop=e.scrollTop,t.scrollLeft=e.scrollLeft,He()}o("bodyData").addEventListener("input",()=>{b(),le(o("bodyData"),b),u()});o("bodyData").addEventListener("scroll",Ne);o("bodyData").addEventListener("click",e=>{let t=e,s=o("bodyData");s.style.pointerEvents="none";let a=document.elementFromPoint(t.clientX,t.clientY);if(s.style.pointerEvents="",a){let n=a.closest(".tk-var");n&&n.dataset.var&&te(n,n.dataset.var)}});o("bodyData").addEventListener("keydown",e=>{j()&&W(e)});o("url").addEventListener("keydown",e=>{if(j()){W(e);return}e.key==="Enter"&&e.preventDefault()});o("bodyData").addEventListener("blur",()=>{setTimeout(f,150)});o("url").addEventListener("blur",()=>{setTimeout(f,150)});function Z(){let e=o("authType").value,t=o("authFields");t.innerHTML="",e==="bearer"?t.innerHTML='<div class="auth-row"><label>Token</label><input type="text" id="authToken" placeholder="{{token}}" /></div>':e==="basic"?t.innerHTML='<div class="auth-row"><label>Username</label><input type="text" id="authUsername" placeholder="username" /></div><div class="auth-row"><label>Password</label><input type="password" id="authPassword" placeholder="password" /></div>':e==="apikey"&&(t.innerHTML='<div class="auth-row"><label>Key</label><input type="text" id="authKey" placeholder="X-Api-Key" /></div><div class="auth-row"><label>Value</label><input type="text" id="authValue" placeholder="{{apiKey}}" /></div><div class="auth-row"><label>In</label><select id="authPlacement" class="auth-select" style="margin:0;"><option value="header">Header</option><option value="query">Query</option></select></div>')}function N(){let e=T?JSON.parse(JSON.stringify(T)):{};e.info||(e.info={type:"http"}),e.http||(e.http={}),e.settings||(e.settings={}),e.http.method=S.value,e.http.url=Ve();let t=[];document.querySelectorAll("#paramsBody tr").forEach(n=>{t.push({name:n.querySelector(".p-name").value,value:n.querySelector(".p-value").value,type:n.querySelector(".p-type").value,disabled:!n.querySelector(".p-enabled").checked})}),e.http.params=t;let s=[];if(document.querySelectorAll("#headersBody tr").forEach(n=>{s.push({name:n.querySelector(".h-name").value,value:n.querySelector(".h-value").value,disabled:!n.querySelector(".h-enabled").checked})}),e.http.headers=s,M!=="none")if(M==="form-urlencoded"||M==="multipart-form"){let n=[];document.querySelectorAll("#bodyFormBody tr").forEach(l=>{n.push({name:l.querySelector(".f-name").value,value:l.querySelector(".f-value").value,disabled:!l.querySelector(".f-enabled").checked})}),e.http.body={type:M,data:n}}else e.http.body={type:H,data:o("bodyData").value};else delete e.http.body;let a=o("authType").value;return a==="bearer"?e.http.auth={type:"bearer",token:c("authToken")?.value||""}:a==="basic"?e.http.auth={type:"basic",username:c("authUsername")?.value||"",password:c("authPassword")?.value||""}:a==="apikey"?e.http.auth={type:"apikey",key:c("authKey")?.value||"",value:c("authValue")?.value||"",placement:o("authPlacement")?.value||"header"}:a==="inherit"?e.http.auth="inherit":delete e.http.auth,e.settings.timeout=parseInt(c("settingTimeout").value)||3e4,e.settings.encodeUrl=c("settingEncodeUrl").checked,e.settings.followRedirects=c("settingFollowRedirects").checked,e.settings.maxRedirects=parseInt(c("settingMaxRedirects").value)||5,e}function Ue(){let e=N();o("sendBtn").classList.add("sending"),o("sendBtn").disabled=!0,o("sendBtn").textContent="Sending...",fe(),v.postMessage({type:"sendRequest",request:e})}function Oe(){x&&(clearTimeout(x),F(null)),A(!0);let e=N();v.postMessage({type:"saveDocument",request:e})}function Fe(e){ne(e),ve();let t=e.http||{};if(S.value=(t.method||"GET").toUpperCase(),Le(),Pe(t.url||""),o("paramsBody").innerHTML="",(t.params||[]).forEach(n=>Te(n.name,n.value,n.type||"query",n.disabled)),o("headersBody").innerHTML="",(t.headers||[]).forEach(n=>xe(n.name,n.value,n.disabled)),t.body){let n=Array.isArray(t.body)?(t.body.find(l=>l.selected)||t.body[0])?.body:t.body;n&&(n.type==="form-urlencoded"||n.type==="multipart-form"?(P(n.type),o("bodyFormBody").innerHTML="",(n.data||[]).forEach(l=>Me(l.name,l.value,l.disabled))):(P("raw"),D(n.type||"json"),o("bodyLangMode").value=H,n.data&&(o("bodyData").value=n.data),b()))}else P("none");let s=t.auth;s==="inherit"?o("authType").value="inherit":s&&s.type?(o("authType").value=s.type,Z(),s.type==="bearer"?setTimeout(()=>{let n=c("authToken");n&&(n.value=s.token||"")},0):s.type==="basic"?setTimeout(()=>{let n=c("authUsername");n&&(n.value=s.username||"");let l=c("authPassword");l&&(l.value=s.password||"")},0):s.type==="apikey"&&setTimeout(()=>{let n=c("authKey");n&&(n.value=s.key||"");let l=c("authValue");l&&(l.value=s.value||"");let r=o("authPlacement");r&&(r.value=s.placement||"header")},0)):o("authType").value="none",Z();let a=e.settings||{};c("settingTimeout").value=a.timeout!==void 0&&a.timeout!=="inherit"?a.timeout:"30000",c("settingEncodeUrl").checked=a.encodeUrl!==void 0&&a.encodeUrl!=="inherit"?a.encodeUrl:!0,c("settingFollowRedirects").checked=a.followRedirects!==void 0&&a.followRedirects!=="inherit"?a.followRedirects:!0,c("settingMaxRedirects").value=a.maxRedirects!==void 0&&a.maxRedirects!=="inherit"?a.maxRedirects:"5",R()}window.addEventListener("message",e=>{let t=e.data;switch(t.type){case"requestLoaded":if(O){A(!1);break}Fe(t.request);break;case"response":Y(t.response);break;case"sending":o("sendBtn").classList.add("sending"),o("sendBtn").disabled=!0,o("sendBtn").textContent="Sending...";break;case"saved":break;case"error":X(),o("sendBtn").classList.remove("sending"),o("sendBtn").disabled=!1,o("sendBtn").textContent="Send";break;case"languageChanged":D(t.language),o("bodyLangMode").value=H,b();break;case"bodyUpdated":o("bodyData").value=t.content,b();break;case"examplesUpdated":T&&(T.examples=t.examples||[]);break;case"loadExample":{let s=t.example;if(s.response){let a={};if(s.response.headers)for(let n of s.response.headers)a[n.name]=n.value;Y({status:s.response.status,statusText:s.response.statusText,headers:a,body:s.response.body?.data??"",duration:0,size:(s.response.body?.data??"").length})}break}case"variablesResolved":se(t.variables||{}),b(),B();break}});o("sendBtn").addEventListener("click",Ue);o("copyRespBtn").addEventListener("click",()=>{let e=ge();e&&navigator.clipboard.writeText(e).then(()=>{let t=o("copyRespBtn");t.textContent="Copied!",setTimeout(()=>{t.textContent="Copy"},1500)})});o("saveExampleBtn").addEventListener("click",()=>{if(!J())return;let e=N();v.postMessage({type:"saveExample",request:e,response:J()})});o("addParamBtn").addEventListener("click",()=>Te());o("addHeaderBtn").addEventListener("click",()=>xe());o("addFormFieldBtn").addEventListener("click",()=>Me());o("authType").addEventListener("change",()=>{Z(),u()});o("panel-auth").addEventListener("input",u);o("panel-auth").addEventListener("change",u);o("panel-settings").addEventListener("input",u);o("panel-settings").addEventListener("change",u);o("bodyLangMode").addEventListener("change",()=>{D(o("bodyLangMode").value),b(),u()});document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="s"&&(e.preventDefault(),Oe())});v.postMessage({type:"ready"});})();
